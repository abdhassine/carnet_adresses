{% extends "CarnetAdressesAppBundle::layout.html.twig" %}


{% block title %}
    {{ parent() }} - Contacts de {{ username }}
{% endblock %}


{% block menubar %}
    <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
            <li><a href="{{ path('carnet_app_profil', {'username':username}) }}">Mon profil</a></li>
            <li class="active"><a href="{{ path('carnet_app_listing', {'username':username}) }}">Mes contacts</a></li>
            <li><a href="{{ path('carnet_app_ajouter', {'username':username}) }}">Ajouter un contact</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Déconnexion</a></li>
        </ul>
    </div>
{% endblock %}


{% block header %}
    {{ parent() }}
    <h3> Contacts du membre <b>{{ username }}</b></h3>
{% endblock %}


{% block content %}
    <div class="row">
        <div class="col-lg-8 col-md-offset-2">
            {% if contactsForm %}
            {{ form_start(contactsForm, { 'action':path('carnet_app_listing', {'username':username}) } ) }}
                <table class="table table-hover">
                    <caption class="lead"><i>Vos contacts</i></caption>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Pseudo</th>
                            <th>Adresse e-mail</th>
                            <th>Prénom et nom</th>
                        </tr>
                    </thead>

                    <tbody>
                    {% for child in contactsForm.user %}
                        {% set index = child.vars.value %}
                        <tr>
                            <td>{{ form_widget(child) }}</td>
                            <td>
                                <a href="{{ path('carnet_app_profil', {'username':choices[index].username}) }}">
                                    {{ choices[index].username }}
                                </a>
                            </td>
                            <td>{{ choices[index].email }}</td>
                            <td>{{ choices[index].firstname }} {{ choices[index].surname }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                <p class="text-right">
                    <input type="submit" method="post" class="btn btn-danger btn-md" value="Supprimer la sélection">
                </p>
            {{ form_end(contactsForm) }}
            {% else %}
                <p class="lead">
                    Votre liste de contacts est vide.
                </p>
            {% endif %}
        </div>
    </div>
{% endblock %}
